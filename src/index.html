<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Save the reef</title>
  </head>
  <body>
    <!-- scene-controller  -->
    <a-scene simple-navmesh="radius: 38; coralRadius: 10" fog="type: exponential; color: #0C4B5F; near: 0.5; far: 60; density: 0.001" shadow="type: pcfsoft">
      <a-assets>
        <img id="sandTexture" src="assets/sand.jpg">
        <img id="skybox" src="assets/skybox.png">
        <a-asset-item id="triplets-model" src="assets/triplets.glb"></a-asset-item>
        <a-asset-item id="plant-model" src="assets/water-plant.glb"></a-asset-item>
        
        <a-asset-item id="coral-acropora-cervicornis" src="assets/coral/acropora-cervicornis.glb"></a-asset-item>
        <a-asset-item id="coral-pseudodiploria-strigosa" src="assets/coral/pseudodiploria-strigosa.glb"></a-asset-item>
        <a-asset-item id="coral-millepora-alcicornis" src="assets/coral/millepora-alcicornis.glb"></a-asset-item>
        <a-asset-item id="coral-montastrea-cavernosa" src="assets/coral/montastrea-cavernosa.glb"></a-asset-item>
        <a-asset-item id="coral-dendrogyra-cylindricus" src="assets/coral/dendrogyra-cylindricus.glb"></a-asset-item>
        <a-asset-item id="coral-agaricia-speciosa" src="assets/coral/agaricia-speciosa.glb"></a-asset-item>
        <a-asset-item id="coral-acropora-prolifera" src="assets/coral/acropora-prolifera.glb"></a-asset-item>
        <a-asset-item id="coral-acropora-palmata" src="assets/coral/acropora-palmata.glb"></a-asset-item>

        <a-asset-item id="coral-colpophyllia-natans" src="assets/coral/colpophyllia-natans.glb"></a-asset-item>

        <a-asset-item id="coral-eusmilia-fastigiata" src="assets/coral/eusmilia-fastigiata.glb"></a-asset-item>


        <a-asset-item id="coral-meandrina-meandrites" src="assets/coral/meandrina-meandrites.glb"></a-asset-item>
      </a-assets>

      <!-- Underwater floor with sand texture -->
      <a-circle id="floor" position="0 0 -4" rotation="-90 0 0" radius="40" segments="80" 
               material="src: #sandTexture; repeat: 5 5" shadow="receive: true"></a-circle>

      <!-- Stationary caustics effect using custom shader -->
      <a-circle position="0 0.01 -4" rotation="-90 0 0" radius="40" segments="80" 
               material="shader: stationary-caustics; color: #00aaff; transparent: true; blending: additive" shadow="receive: true"></a-circle>

      <!-- Water surface -->
      <!-- <a-circle position="0 20 -4" rotation="-90 0 0" radius="40" segments="80" 
               material="shader: water-surface; color: #7AD7F0; transparent: true; side: double"></a-circle> -->

      <!-- Bubble particle system -->
      <a-entity bubbles="count: 220; color: #e0e0ff; size: 0.02; speed: 0.2; opacity: 0.3" position="-2 -0.1 -3"></a-entity>
      <a-entity bubbles="count: 150; color: #e0e0ff; size: 0.01; speed: 0.1; opacity: 0.2" position="2 -0.15 -3"></a-entity>
      <a-entity bubbles="count: 150; color: #e0e0fd; size: 0.01; speed: 0.1; opacity: 0.2" position="3 0.5 -2"></a-entity>


      <a-entity id="triplets" gltf-model="#triplets-model" position="0 -1.5 0" scale="1.3 1.3 1.3">     
        <!-- <a-entity id="plant" animation-mixer="loop: repeat; timeScale:0.4" surface-placer="position: -1.98 0.00005 14.55; normal: 0 0 0; scale: 0.01; leeway: -0.47"
        gltf-model="#plant-model" ></a-entity>
        <a-entity id="plant2" animation-mixer="loop: repeat; startAt: 20; timeScale:0.3" surface-placer="position: -0.427 3.668 13.81; normal: 0 0 0; scale: 0.01; leeway: -0.49"
        gltf-model="#plant-model" > </a-entity>    -->
        
        <a-entity id="coral1" surface-placer="originalParentScale: 1.3; position: 0.83 7.12 11.26; normal: -0.05 0.78 -0.63; scale: 6; leeway: -0.35"
                    gltf-model="#coral-acropora-cervicornis" ocean-shader="colorStrength: 0.2">
        </a-entity>

        <a-entity id="coral2" surface-placer="originalParentScale: 1.3; position: -3.19 7.10 9.31; normal: 0.21 3.4 -0.64; scale: 8; leeway: -0.2"
                    gltf-model="#coral-pseudodiploria-strigosa" ocean-shader="foamColor: #FFCa00; colorStrength: 0.3; waveHeight: 0.001;" >
        </a-entity>
s
        <a-entity id="coral3" surface-placer="originalParentScale: 1.3; position: -8.33 6.87 8.03; normal: 0.43 0.79 -0.44; scale: 8; leeway: -0.35"
                  rotation="0 30 0"  gltf-model="#coral-acropora-cervicornis" ocean-shader="foamColor: #0000CC; waveHeight: 0.003; colorStrength: 0.4">
        </a-entity>

        <a-entity id="coral4" surface-placer="originalParentScale: 1.3; position: 5.41 8.03 11.48; normal: 1 20.78 -0.55; scale: 1d; leeway: -0.35"
                  gltf-model="#coral-montastrea-cavernosa" ocean-shader="waterColor: #0Caaff; waveHeight: 0.001; colorStrength: 0.2">
        </a-entity>

        <a-entity id="coral5" surface-placer="originalParentScale: 1.3; position: -5.33 6.47 9.03; normal: 1 60.3 -0.55; scale: 5; leeway: -0.35"
                   gltf-model="#coral-dendrogyra-cylindricus" ocean-shader="colorStrength: 0.1">
        </a-entity>

        <a-entity id="coral6" surface-placer="originalParentScale: 1.3; position: 5.41 7.3 9.48; normal: 1 60.3 -0.55; scale: 50; leeway: -0.35"
                   gltf-model="#coral-gorgona-ventalina" ocean-shader="colorStrength: 0.1">
        </a-entity>

        <a-entity id="coral7" surface-placer="originalParentScale: 1.3; position: 2.56 6.841 12.315; normal: 1 10.3 -0.55; scale: 30; leeway: -0.35"
        gltf-model="#coral-agaricia-speciosa" ocean-shader="colorStrength: 0.1; waveHeight: 0.000001">
        </a-entity>
        <a-entity id="coral8" surface-placer="originalParentScale: 1.3; position: 5.41 8.5 10.48; normal: 1 20.3 -0.55; scale: 8; leeway: -0.35"
                   gltf-model="#coral-acropora-prolifera" ocean-shader="colorStrength: 0.1; waveHeight: 0.001">
        </a-entity>

        <a-entity id="coral9" surface-placer="originalParentScale: 1.3; position: -2.33 6.94 7.43; normal: 1 20.3 -0.55; scale: 4; leeway: -0.35"
                   gltf-model="#coral-acropora-palmata" ocean-shader="colorStrength: 0.1; waveHeight: 0.001">
        </a-entity>
        <a-entity id="coral10" surface-placer="originalParentScale: 1.3; position: -0.33 7.37 10.03; normal: 1 20.3 -0.55; scale: 4; leeway: -0.35"
        gltf-model="#coral-meandrina-meandrites" ocean-shader="colorStrength: 0.1; waveHeight: 0.001">
        </a-entity> 
        
        <a-entity id="coral11" surface-placer="originalParentScale: 1.3; position: 5.41 8.2 9.48; normal: 1 20.3 -0.55; scale: 1; leeway: -0.35"
        gltf-model="#coral-colpophyllia-natans" ocean-shader="colorStrength: 0.5; waveHeight: 0.001">
        </a-entity>  

        <a-entity id="coral12" surface-placer="originalParentScale: 1.3; position: 5.41 8.5 8.48; normal: 1 20.3 -0.55; scale: 1; leeway: -0.35"
        gltf-model="#coral-eusmilia-fastigiata" ocean-shader="colorStrength: 0.1; waveHeight: 0.01">
        </a-entity>  
        

        </a-entity>
      </a-entity> 
      <a-entity light="type: directional; color: #FFF; intensity: 0.6; target: #rock" position="1 1 1"></a-entity>

      <a-entity light="type: directional; color: #FFF; intensity: 0.6; target: #coral2" position="1 1 1"></a-entity>
      
      <!-- Ambient light to simulate underwater lighting -->
      <a-light type="ambient" color="#0C4B5F" intensity="0.3"></a-light>

      <!-- Directional light to enhance the caustics effect and cast shadows -->
      <a-light id="light-floor" type="directional" target="#floor" color="#ffffff" intensity="0.9" position="-1 19 -21" castShadow="true" 
               shadow="mapSize: 2048x2048; bias: -0.001; near: 0.3; far: 50"></a-light>
            
      <!-- Underwater sky color -->
      <a-sky src="#skybox" ></a-sky>

      <!-- Camera -->
      <a-entity id="player-camera" camera="near: 0.01; far: 10000" position="0 8 25" 
          look-controls="pointerLockEnabled: true"
          custom-wasd-controls="speed: 20"
          simple-float="amplitude: 0.8; speed: 3; horizontalDrift: 0.05; minHeight: 0.8; tiltAmount: 5">
      </a-entity>

    </a-scene>
  </body>
</html>